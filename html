<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groovy Doobee - Vinyl Shop</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        .animate-slide-in-right {
            animation: slideInRight 0.5s ease-out forwards;
        }
        
        /* Custom scrollbar for better look */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #f472b6; /* pink-500 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background-color: #fce7f6; /* pink-100 */
        }

        /* Vinyl image styling */
        .vinyl-image {
            object-fit: cover;
            border-radius: 0.5rem; 
        }
        
        /* Artist Square Styling */
        .artist-square {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative; 
            overflow: hidden; 
        }

        .artist-square::before {
            content: '';
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.45); 
            transition: background-color 0.3s;
            z-index: 1; 
        }

        .artist-square:hover::before {
            background-color: rgba(0, 0, 0, 0.2); 
        }

        .artist-name-text {
            position: relative; 
            z-index: 2; 
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
        }

        /* Styling for clickable product card */
        .product-card-button {
            display: block;
            width: 100%;
            text-align: center;
            padding: 1rem;
            border-radius: 0.75rem; 
            border: 1px solid #fbcfe8;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); 
            background-color: #ffffff; 
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
        }
        .product-card-button:hover {
            transform: translateY(-4px); 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); 
            background-color: #fce7f6;
        }

        /* Lazada-style button */
        .lazada-btn {
            background-color: #f87171; /* A stronger accent pink/red */
            color: white;
            transition: background-color 0.2s, transform 0.1s;
        }
        .lazada-btn:hover {
            background-color: #ef4444; /* darker red */
            transform: translateY(-1px);
        }

        /* Profile Section Gradient */
        .profile-header {
            background: linear-gradient(to right, #be185d, #ec4899);
        }
    </style>
</head>
<body class="bg-pink-50 text-pink-900 flex flex-col min-h-screen">
    <!-- Header -->
    <header class="bg-pink-700 text-white py-4 px-4 md:px-8 shadow-lg sticky top-0 z-50">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <button onclick="changePage('artists')" class="text-2xl md:text-3xl font-bold hover:text-pink-100 transition-colors focus:outline-none">
                Groovy Doobee
            </button>
            
            <div class="flex items-center space-x-4">
                <!-- Account Icon Button (NEW) -->
                <button onclick="changePage('account')" class="p-2 rounded-full hover:bg-pink-600 transition-colors focus:outline-none" title="Account Center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                </button>

                <!-- Cart Icon Button -->
                <button onclick="changePage('cart')" class="relative p-2 rounded-full hover:bg-pink-600 transition-colors focus:outline-none" title="Shopping Cart">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-cart"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.72a2 2 0 0 0 2-1.58L23 6H6"/></svg>
                    <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">
                        0
                    </span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-6xl mx-auto px-4 md:px-8 py-8 w-full">
        <!-- Main Application Container -->
        <div id="main-app-container">
            <!-- Pages will be rendered here -->
        </div>

        <!-- Notification Message Display -->
        <div id="notification-message-container">
            <!-- Messages (like "Added to Cart") will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-pink-100 border-t border-pink-200 py-8 px-4 md:px-8 mt-auto">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-sm text-pink-700">
                © 2025FracyRights Groovy Doobee. I love you so much Sir Gabriel
            </p>
        </div>
    </footer>

    <script>
        // --- DATA ---

        // Helper function to format price for display
        const formatPrice = (amount) => {
            return `₱ ${amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',')}`;
        };

        const SHIPPING_FEE = 150.00;
        
        // Data for artists and vinyl records.
        const brands = [
            { 
                id: 'beabadoobee', 
                name: 'Beabadoobee', 
                description: "The Pinay-British indie rock sensation. Explore her nostalgic and raw music on vinyl.",
                logo: "https://wallpapercat.com/w/full/c/b/b/2273794-2400x1500-desktop-hd-beabadoobee-wallpaper.jpg",
                products: [
                    { id: 'beatopia', name: 'Beatopia LP (Pink Vinyl)', price: 2100.00, image: "https://cdn.hmv.com/r/w-960/hmv/files/a0/a0afeb34-23ae-4db6-8216-82ceb000c779.jpg", tracks: ["1. Beatopia Cultsong", "2. 10:36", "3. Sunny Day", "4. See You Soon", "5. The Perfect Pair", "6. Broken CD"] },
                    { id: 'fake_it_flowers', name: 'Fake It Flowers LP (Orange Vinyl)', price: 2300.00, image: "https://external-preview.redd.it/Mj-psdf-vughGNVoRtGj5hvkf2wQdnddBX5u9Y31JYk.jpg?auto=webp&s=7694beae795c6fe77969a60760cb44c88d9cba4f", tracks: ["1. Care", "2. Dye It Red", "3. Back To Mars", "4. Charlie Brown", "5. Worth It", "6. How Was Your Day?"] },
                    { id: 'space_cadet', name: 'Space Cadet EP', price: 1800.00, image: "https://f4.bcbits.com/img/0028540460_10.jpg", tracks: ["1. Space Cadet", "2. I Wish I Was Stephen Malkmus", "3. Sun", "4. Talk"] }
                ]
            },
            { 
                id: 'taylor_swift', 
                name: 'Taylor Swift', 
                description: "The queen of pop and country. Find limited editions of her iconic albums on vinyl.",
                logo: "https://tse1.explicit.bing.net/th/id/OIP.bDK-1HHBaME1FT7BRN6qyQAAAA?rs=1&pid=ImgDetMain&o=7&rm=3",
                products: [
                    { id: '1989', name: '1989 (Taylor\'s Version) Vinyl', price: 2500.00, image: "image_4d8dc7.png", tracks: ["1. Welcome to New York (TV)", "2. Blank Space (TV)", "3. Style (TV)", "4. Bad Blood (TV)", "5. Wildest Dreams (TV)", "6. Shake It Off (TV)"] },
                    { id: 'midnights', name: 'Midnights Moonstone Blue Edition Vinyl', price: 2800.00, image: "image_4ca50b.jpg", tracks: ["1. Lavender Haze", "2. Maroon", "3. Anti-Hero", "4. Snow On The Beach", "5. You're On Your Own, Kid", "6. Midnight Rain"] },
                    { id: 'folklore', name: 'Folklore (Beige) Double LP', price: 2650.00, image: "https://upload.wikimedia.org/wikipedia/en/f/f3/Taylor_Swift_-_Folklore.png", tracks: ["1. the 1", "2. cardigan", "3. the last great american dynasty", "4. exile", "5. my tears ricochet", "6. mirrorball"] }
                ]
            },
            { 
                id: 'the_1975', 
                name: 'The 1975', 
                description: "The innovative UK band blurring the lines between pop, rock, and electronic music.",
                logo: "https://storage.googleapis.com/afs-prod/media/e06d568c8b9b4746b8f9b5fccfee2667/1050.jpeg",
                products: [
                    { id: 'brief_inquiry', name: 'A Brief Inquiry LP', price: 2700.00, image: "image_4d9189.png", tracks: ["1. The 1975", "2. Give Yourself a Try", "3. TOOTIMETOOTIMETOOTIME", "4. How to Draw / Petrichor", "5. Love It If We Made It", "6. Be My Mistake"] },
                    { id: 'ilikewhen', name: 'I Like It When You Sleep LP', price: 2900.00, image: "image_4d94d5.png", tracks: ["1. The 1975", "2. Love Me", "3. UGH!", "4. A Change of Heart", "5. She's American", "6. If I Believe You"] },
                    { id: 'self_titled', name: 'The 1975 (Self-Titled) LP', price: 2600.00, image: "https://upload.wikimedia.org/wikipedia/en/d/d0/The_1975_-_Being_Funny_in_a_Foreign_Language.png", tracks: ["1. The 1975", "2. Happiness", "3. Looking for Somebody (To Love)", "4. Part of the Band", "5. Oh Caroline", "6. I'm in Love with You"] }
                ]
            },
            { 
                id: 'lizzy_mcalpine', 
                name: 'Lizzy McAlpine', 
                description: "Introspective songwriting and viral folk-pop hits from the Pennsylvania native.",
                logo: "https://www.nme.com/wp-content/uploads/2023/04/Chicago-Show-03-696x442.jpg",
                products: [
                    { id: 'five_seconds_flat', name: 'five seconds flat LP', price: 2400.00, image: "image_ffed0e.jpg", tracks: ["1. doomsday", "2. an ego thing", "3. erase me", "4. called you again", "5. all my ghosts", "6. reckless driving"] },
                    { id: 'older', name: 'Older LP (New Release)', price: 2800.00, image: "image_ff78d2.png", tracks: ["1. The Elevator", "2. Come Down Soon", "3. Like It Tastes", "4. Older", "5. Drunk, Running", "6. Broken Glass"] },
                    { id: 'give_me_a_minute', name: 'Give Me A Minute LP', price: 2200.00, image: "https://f4.bcbits.com/img/a0447171439_10.jpg", tracks: ["1. Give Me A Minute", "2. Nothing/Sadie", "3. To the Mountains", "4. Apple Pie", "5. Same Boat", "6. Over-the-moon"] }
                ]
            },
            { 
                id: 'clairo', 
                name: 'Clairo', 
                description: "The face of lo-fi and indie bedroom pop. Her sound is gentle, yet deeply textured.",
                logo: "https://i.pinimg.com/originals/45/b3/fc/45b3fc12ed4cf1f1873de48371b7c5c4.jpg",
                products: [
                    { id: 'sling', name: 'Sling LP (Standard Black)', price: 2500.00, image: "image_4d990f.png", tracks: ["1. Bambi", "2. Amoeba", "3. Partridge", "4. Zinnias", "5. Blouse", "6. Wade"] },
                    { id: 'immunity', name: 'Immunity LP (Blue Vinyl)', price: 2650.00, image: "image_4d9850.png", tracks: ["1. Alewife", "2. Impossible", "3. Closer to You", "4. North", "5. Bags", "6. Softly"] },
                    { id: 'diary001', name: 'Diary 001 EP', price: 1900.00, image: "https://f4.bcbits.com/img/0014792610_10.jpg", tracks: ["1. Hello?", "2. Flaming Hot Cheetos", "3. B.O.M.D.", "4. 4EVER", "5. Pretty Girl", "6. How"] }
                ]
            },
            { 
                id: 'the_marias', 
                name: 'The Marías', 
                description: "Smooth, dreamy, and bilingual pop. Relax to their sensual and jazz-infused sound.", 
                logo: "https://s1.ticketm.net/dam/a/667/c68e18ef-e5a4-4154-a02f-278e939a7667_TABLET_LANDSCAPE_LARGE_16_9.jpg",
                products: [
                    { id: 'cinema', name: 'CINEMA LP (Clear Vinyl)', price: 2800.00, image: "image_00614a.png", tracks: ["1. Just a Feeling", "2. Calling U Back", "3. Hush", "4. All I Really Want Is You", "5. Hablemos", "6. Little by Little"] },
                    { id: 'submarine', name: 'Submarine LP (Yellow Vinyl)', price: 2600.00, image: "image_000eba.png", tracks: ["1. Ride", "2. Hamptons", "3. Echo", "4. Run Your Mouth", "5. Real Life", "6. Blur"] },
                    { id: 'superclean', name: 'Superclean, Vol. I & II LP', price: 3100.00, image: "https://f4.bcbits.com/img/a2185803248_10.jpg", tracks: ["1. I Don't Know You", "2. Basta Ya", "3. Ruthless", "4. Cariñito", "5. ABQ", "6. Loverboy"] }
                ]
            },
            { 
                id: 'blackpink', 
                name: 'BLACKPINK', 
                description: "The biggest girl group in the world. Get your limited edition K-Pop vinyl now.",
                logo: "https://i.pinimg.com/736x/87/18/84/8718840c5f59048a1c6e11894d07018d.jpg",
                products: [
                    { id: 'the_album', name: 'THE ALBUM LP (Pink Vinyl)', price: 3500.00, image: "https://shop.blackpinkmusic.com/cdn/shop/files/blackpink-the-album-pink-vinyl-2.jpg", tracks: ["1. How You Like That", "2. Ice Cream", "3. Pretty Savage", "4. Bet You Wanna", "5. Lovesick Girls", "6. Crazy Over You"] },
                    { id: 'born_pink', name: 'BORN PINK LP (Black Vinyl)', price: 3200.00, image: "https://s3.eu-west-1.amazonaws.com/media.store-jp.nintendo.com/item/10000/77501_1.jpg", tracks: ["1. Pink Venom", "2. Shut Down", "3. Typa Girl", "4. Yeah Yeah Yeah", "5. Hard to Love", "6. The Happiest Girl"] },
                    { id: 'square_up', name: 'Square Up Mini Album (Red Vinyl)', price: 2900.00, image: "https://m.media-amazon.com/images/I/7161m-iV82L._UF894,1000_QL80_.jpg", tracks: ["1. Ddu-Du Ddu-Du", "2. Forever Young", "3. Really", "4. See U Later"] }
                ]
            },
            { 
                id: 'phoebe_bridgers', 
                name: 'Phoebe Bridgers', 
                description: "Emotive, melancholic folk-rock from the highly acclaimed singer-songwriter.",
                logo: "https://placehold.co/500x500/808080/ffffff?text=Phoebe+Bridgers",
                products: [
                    { id: 'stranger_in_alps', name: 'Stranger in the Alps LP', price: 2400.00, image: "https://placehold.co/256x256/fce7f6/be185d?text=Alps+LP", tracks: ["1. Smoke Signals", "2. Motion Sickness", "3. Funeral", "4. Demi Moore", "5. Scott Street", "6. Killer"] },
                    { id: 'punisher', name: 'Punisher LP (Blue/Swirly)', price: 2700.00, image: "https://placehold.co/256x256/fce7f6/be185d?text=Punisher+LP", tracks: ["1. DVD Menu", "2. Garden Song", "3. Kyoto", "4. Punisher", "5. Halloween", "6. Chinese Satellite"] },
                    { id: 'boygenius', name: 'the record (Boygenius) LP', price: 2800.00, image: "https://placehold.co/256x256/fce7f6/be185d?text=Boygenius+LP", tracks: ["1. Without You Without Them", "2. $20", "3. Emily I'm Sorry", "4. True Blue", "5. Cool About It", "6. Not Strong Enough"] }
                ]
            }
        ];

        // --- GLOBAL STATE ---
        let state = {
            currentPage: 'artists', 
            selectedArtistId: null,
            selectedProductId: null,
            cart: [], 
            checkoutDetails: { name: '', address: '', contact: '' },
            user: {
                name: 'Sir Gabriel',
                email: 'gabriel@groovy.com',
                memberSince: '2023',
                tier: 'Platinum Member'
            }
        };

        // --- UTILITY FUNCTIONS ---

        const showNotification = (message) => {
            const container = document.getElementById('notification-message-container');
            container.innerHTML = `
                <div class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-500 animate-slide-in-right z-50">
                    ${message}
                </div>
            `;
            setTimeout(() => {
                container.innerHTML = '';
            }, 3000);
        };

        const updateCartCount = () => {
            const count = state.cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
            return count;
        };

        const findProduct = (artistId, productId) => {
            const artist = brands.find(b => b.id === artistId);
            if (!artist) return null;
            return artist.products.find(p => p.id === productId);
        };

        const findCartIndex = (artistId, productId) => {
            return state.cart.findIndex(item => item.artistId === artistId && item.productId === productId);
        }

        // --- CART LOGIC ---

        window.addToCart = (artistId, productId, productName, productPrice) => {
            const existingIndex = findCartIndex(artistId, productId);
            if (existingIndex > -1) {
                state.cart[existingIndex].quantity += 1;
            } else {
                state.cart.push({ artistId, productId, name: productName, price: productPrice, quantity: 1 });
            }
            updateCartCount();
            showNotification(`${productName} added to cart!`);
            // We do not change page here, the original code had changePage('cart') which instantly switches the view,
            // which is usually undesirable after adding an item. We'll rely on the notification.
        };

        window.updateCartQuantity = (artistId, productId, newQuantity) => {
            const index = findCartIndex(artistId, productId);
            if (index > -1) {
                const quantity = parseInt(newQuantity, 10);
                if (quantity > 0) state.cart[index].quantity = quantity;
                else state.cart.splice(index, 1);
                updateCartCount();
                renderCartPage(); 
            }
        };

        window.removeItemFromCart = (artistId, productId) => {
            const index = findCartIndex(artistId, productId);
            if (index > -1) {
                state.cart.splice(index, 1);
                updateCartCount();
                renderCartPage();
            }
        };

        // --- CHECKOUT LOGIC (FIXED: Added placeOrder function) ---

        window.placeOrder = () => {
            const nameInput = document.getElementById('name');
            const addressInput = document.getElementById('address');
            const contactInput = document.getElementById('contact');

            if (!nameInput.value || !addressInput.value || !contactInput.value) {
                // In a real app, this would use a custom modal/notification
                alert("Please fill out all delivery details (Full Name, Address, Contact Number) before placing the order.");
                return;
            }

            // Save details to state
            state.checkoutDetails = {
                name: nameInput.value,
                address: addressInput.value,
                contact: contactInput.value,
            };

            // Clear the cart after successful "order placement"
            state.cart = [];
            
            // Navigate to confirmation page
            changePage('confirmation');
        };

        // --- NAVIGATION AND RENDERING ---

        window.changePage = (page, artistId = null, productId = null) => {
            state.currentPage = page;
            state.selectedArtistId = artistId;
            state.selectedProductId = productId;
            renderPage();
        };

        const renderPage = () => {
            const container = document.getElementById('main-app-container');
            container.innerHTML = ''; 

            switch (state.currentPage) {
                case 'artists':
                    container.innerHTML = renderArtistSelectionPage();
                    renderBrands(); 
                    break;
                case 'albums':
                    container.innerHTML = renderAlbumListPage();
                    break;
                case 'product':
                    container.innerHTML = renderProductDetailPage();
                    break;
                case 'cart':
                    container.innerHTML = renderCartPage();
                    break;
                case 'checkout':
                    container.innerHTML = renderCheckoutPage();
                    // Pre-fill form if details exist
                    setTimeout(() => {
                        const nameEl = document.getElementById('name');
                        const addressEl = document.getElementById('address');
                        const contactEl = document.getElementById('contact');
                        if (nameEl) nameEl.value = state.checkoutDetails.name;
                        if (addressEl) addressEl.value = state.checkoutDetails.address;
                        if (contactEl) contactEl.value = state.checkoutDetails.contact;
                    }, 0);
                    break;
                case 'confirmation':
                    container.innerHTML = renderConfirmationPage();
                    break;
                case 'account':
                    container.innerHTML = renderAccountPage();
                    break;
                default:
                    changePage('artists');
            }
            updateCartCount();
        };

        // --- PAGE RENDERING FUNCTIONS ---

        const renderArtistSelectionPage = () => {
            return `
                <section class="mb-12 animate-fade-in-up">
                    <h2 class="text-xl md:text-2xl font-semibold mb-6 text-center text-pink-700">Select Your Artist</h2>
                    <div id="brands-container" class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8 max-w-6xl mx-auto"></div>
                </section>
            `;
        };
        
        function renderBrands() {
            const brandsContainer = document.getElementById('brands-container');
            const getStyle = (logoUrl) => `background-image: url('${logoUrl}');`;

            brandsContainer.innerHTML = brands.map(brand => `
                <button onclick="changePage('albums', '${brand.id}')"
                    class="w-full h-40 aspect-square text-sm md:text-base font-medium transition-all duration-300 hover:scale-105 flex flex-col items-center justify-center gap-2 rounded-lg shadow-xl bg-pink-100 border-4 border-pink-300 hover:border-pink-500 overflow-hidden artist-square"
                    style="${getStyle(brand.logo)}"
                >
                    <span class="p-2 text-center bg-black bg-opacity-70 text-white rounded-lg font-bold text-lg leading-tight transition-opacity duration-300 artist-name-text">
                        ${brand.name}
                    </span>
                </button>
            `).join('');
        }

        const renderAlbumListPage = () => {
            const activeBrandData = brands.find(b => b.id === state.selectedArtistId);
            if (!activeBrandData) return `<div class="text-center p-12 bg-white rounded-xl shadow-xl">Artist not found.</div>`;

            const productsHtml = activeBrandData.products.map(product => `
                <button onclick="changePage('product', '${activeBrandData.id}', '${product.id}')" class="product-card-button text-center focus:outline-none">
                    <div class="w-full aspect-square mx-auto mb-4">
                        <img src="${product.image}" alt="${product.name}" 
                            class="w-full h-full object-cover rounded-lg vinyl-image border-4 border-pink-300 transition-colors" 
                            onerror="this.onerror=null;this.src='https://placehold.co/256x256/fce7f6/be185d?text=Vinyl+Album'" />
                    </div>
                    <h4 class="font-bold text-lg text-pink-900 mb-1">${product.name}</h4>
                    <p class="text-pink-600 font-semibold text-xl">${formatPrice(product.price)}</p>
                </button>
            `).join('');

            return `
                <div class="bg-white p-8 rounded-xl border border-pink-200 shadow-2xl animate-fade-in-up">
                    <button onclick="changePage('artists')" class="mb-6 flex items-center text-pink-700 hover:text-pink-900 transition-colors font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                        Back to Artist Selection
                    </button>
                    <div class="text-center mb-6">
                        <h3 class="text-2xl md:text-3xl font-extrabold mb-2 text-pink-700">${activeBrandData.name} - Official Vinyl Collection</h3>
                        <p class="text-pink-600 italic max-w-xl mx-auto">${activeBrandData.description}</p>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-8">${productsHtml}</div>
                </div>
            `;
        };

        const renderProductDetailPage = () => {
            const artist = brands.find(b => b.id === state.selectedArtistId);
            const product = artist ? artist.products.find(p => p.id === state.selectedProductId) : null;
            if (!product) return `<div class="text-center p-12 bg-white rounded-xl shadow-xl">Product not found.</div>`;

            const tracksHtml = product.tracks && product.tracks.length > 0 
                ? `<ul class="list-decimal list-inside text-pink-800 space-y-1 bg-pink-50 p-4 rounded-lg">${product.tracks.map(track => `<li>${track}</li>`).join('')}</ul>`
                : `<p class="text-pink-500 italic">Tracklist not available.</p>`;

            return `
                <div class="bg-white p-8 rounded-xl border border-pink-200 shadow-2xl animate-fade-in-up max-w-4xl mx-auto">
                    <button onclick="changePage('albums', '${artist.id}')" class="mb-6 flex items-center text-pink-700 hover:text-pink-900 transition-colors font-medium">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                        Back to ${artist.name}'s Albums
                    </button>
                    <div class="md:flex gap-8 items-start">
                        <div class="w-full md:w-1/2 text-center mb-6 md:mb-0">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-auto object-cover rounded-lg vinyl-image border-4 border-pink-500 shadow-lg" onerror="this.onerror=null;this.src='https://placehold.co/300x300/fce7f6/be185d?text=Album+Cover'" />
                        </div>
                        <div class="w-full md:w-1/2">
                            <p class="text-pink-600 text-sm mb-1">${artist.name}</p>
                            <h3 class="text-3xl font-extrabold text-pink-800 mb-2">${product.name}</h3>
                            <div class="text-4xl font-bold text-red-500 mb-6 border-b pb-4 border-pink-200">${formatPrice(product.price)}</div>
                            <div class="mb-6"><h4 class="text-lg font-bold text-pink-900 mb-2">Tracklist:</h4>${tracksHtml}</div>
                            <button onclick="addToCart('${artist.id}', '${product.id}', '${product.name}', ${product.price})" class="lazada-btn px-6 py-3 rounded-md font-bold text-lg w-full shadow-lg">
                                <span class="flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V3a1 1 0 011-1z" clip-rule="evenodd" /></svg> ADD TO CART
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        };

        const renderCartPage = () => {
            if (updateCartCount() === 0) {
                return `
                    <div class="bg-white p-12 rounded-xl border border-pink-200 shadow-2xl animate-fade-in-up max-w-xl mx-auto text-center">
                        <h2 class="text-3xl font-extrabold text-pink-700 mb-4">Your Shopping Cart is Empty</h2>
                        <button onclick="changePage('artists')" class="bg-pink-700 text-white px-6 py-3 rounded-full hover:bg-pink-800 transition-colors font-semibold">Start Shopping</button>
                    </div>
                `;
            }
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const cartItemsHtml = state.cart.map(item => `
                <div class="flex items-center p-4 border-b border-pink-100 last:border-b-0">
                    <div class="w-16 h-16 mr-4 flex-shrink-0"><img src="${findProduct(item.artistId, item.productId).image}" alt="${item.name}" class="w-full h-full object-cover rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/64x64/fce7f6/be185d?text=LP'" /></div>
                    <div class="flex-grow"><h4 class="font-bold text-pink-800">${item.name}</h4><p class="text-red-500 font-semibold">${formatPrice(item.price)}</p></div>
                    <div class="flex items-center space-x-2 mx-4"><input type="number" min="1" value="${item.quantity}" onchange="updateCartQuantity('${item.artistId}', '${item.productId}', this.value)" class="w-16 p-1 text-center border border-pink-300 rounded-md bg-pink-50" /></div>
                    <div class="flex flex-col items-end w-24"><p class="text-pink-900 font-bold">${formatPrice(item.price * item.quantity)}</p><button onclick="removeItemFromCart('${item.artistId}', '${item.productId}')" class="text-sm text-red-500 hover:text-red-700 mt-1">Remove</button></div>
                </div>
            `).join('');

            return `
                <div class="max-w-4xl mx-auto bg-white p-8 rounded-xl border border-pink-200 shadow-2xl animate-fade-in-up">
                    <h2 class="text-3xl font-extrabold text-pink-700 mb-6 border-b pb-3">Shopping Cart (${updateCartCount()} Items)</h2>
                    <div class="md:grid md:grid-cols-3 gap-6">
                        <div class="md:col-span-2"><div class="border border-pink-200 rounded-lg divide-y divide-pink-100 mb-6">${cartItemsHtml}</div></div>
                        <div class="md:col-span-1 bg-pink-50 p-6 rounded-lg shadow-inner sticky top-20">
                            <h3 class="text-xl font-bold text-pink-800 mb-4">Order Summary</h3>
                            <div class="flex justify-between text-pink-700 mb-2"><span>Subtotal:</span><span>${formatPrice(subtotal)}</span></div>
                            <div class="flex justify-between text-pink-700 border-b border-pink-200 pb-3 mb-4"><span>Shipping Fee:</span><span>${formatPrice(SHIPPING_FEE)}</span></div>
                            <div class="flex justify-between text-2xl font-extrabold text-pink-900"><span>Total:</span><span>${formatPrice(subtotal + SHIPPING_FEE)}</span></div>
                            <button onclick="changePage('checkout')" class="lazada-btn mt-6 px-6 py-3 rounded-md font-bold text-lg w-full">PROCEED TO CHECKOUT</button>
                        </div>
                    </div>
                </div>
            `;
        };

        const renderCheckoutPage = () => {
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal + SHIPPING_FEE;
            const cartSummaryHtml = state.cart.map(item => `
                <div class="flex justify-between items-center py-2 border-b border-pink-100"><span class="text-sm text-pink-700">${item.name} x ${item.quantity}</span><span class="text-pink-800 font-medium">${formatPrice(item.price * item.quantity)}</span></div>
            `).join('');

            return `
                <div class="max-w-4xl mx-auto bg-white p-8 rounded-xl border border-pink-200 shadow-2xl animate-fade-in-up">
                    <h2 class="text-3xl font-extrabold text-pink-700 mb-6 border-b pb-3">Checkout</h2>
                    <div class="md:grid md:grid-cols-5 gap-8">
                        <div class="md:col-span-3">
                            <h3 class="text-xl font-bold text-pink-800 mb-4">1. Delivery Address</h3>
                            <form id="checkout-form" class="space-y-4 bg-pink-50 p-6 rounded-lg shadow-inner">
                                <div><label class="block text-sm font-medium text-pink-700">Full Name</label><input type="text" id="name" required class="mt-1 block w-full border border-pink-300 rounded-md p-2"></div>
                                <div><label class="block text-sm font-medium text-pink-700">Full Delivery Address</label><textarea id="address" required class="mt-1 block w-full border border-pink-300 rounded-md p-2"></textarea></div>
                                <div><label class="block text-sm font-medium text-pink-700">Contact Number</label><input type="tel" id="contact" required class="mt-1 block w-full border border-pink-300 rounded-md p-2"></div>
                            </form>
                            <h3 class="text-xl font-bold text-pink-800 mt-8 mb-4">2. Payment Method</h3>
                            <div class="bg-pink-50 p-4 rounded-lg border border-pink-200"><label class="inline-flex items-center"><input type="radio" checked class="form-radio text-pink-600"><span class="ml-2 text-pink-800 font-medium">Cash On Delivery (COD)</span></label></div>
                        </div>
                        <div class="md:col-span-2">
                            <h3 class="text-xl font-bold text-pink-800 mb-4">Order Summary</h3>
                            <div class="bg-pink-50 p-6 rounded-lg shadow-inner sticky top-20">
                                <h4 class="font-bold text-pink-900 mb-3 border-b border-pink-200 pb-2">Items (${updateCartCount()})</h4>
                                <div class="max-h-60 overflow-y-auto custom-scrollbar mb-4">${cartSummaryHtml}</div>
                                <div class="space-y-2 pt-4 border-t border-pink-200">
                                    <div class="flex justify-between text-pink-700"><span>Subtotal:</span><span>${formatPrice(subtotal)}</span></div>
                                    <div class="flex justify-between text-pink-700"><span>Shipping Fee:</span><span>${formatPrice(SHIPPING_FEE)}</span></div>
                                    <div class="flex justify-between text-3xl font-extrabold text-red-500 pt-2"><span>TOTAL:</span><span>${formatPrice(total)}</span></div>
                                </div>
                                <!-- FIXED: Call to placeOrder() is now defined -->
                                <button type="button" onclick="placeOrder()" class="lazada-btn mt-6 px-6 py-3 rounded-md font-bold text-lg w-full">PLACE ORDER</button>
                                <button onclick="changePage('cart')" class="mt-3 text-pink-600 hover:text-pink-800 text-sm w-full">Cancel and Return to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const renderConfirmationPage = () => {
            const details = state.checkoutDetails;
            const orderNumber = crypto.randomUUID().substring(0, 8).toUpperCase();
            return `
                <div class="max-w-xl mx-auto bg-white p-10 rounded-xl border border-green-300 shadow-2xl animate-fade-in-up text-center">
                    <h2 class="text-3xl font-extrabold text-green-600 mb-4">ORDER PLACED SUCCESSFULLY!</h2>
                    <p class="text-pink-700 mb-6">Thank you for ordering your vinyl from Groovy Doobee.</p>
                    <div class="bg-pink-50 p-6 rounded-lg border border-pink-200 text-left space-y-3">
                        <h4 class="text-xl font-bold text-pink-800 border-b pb-2 mb-2">Order Details</h4>
                        <p><strong>Order ID:</strong> <span class="text-green-600 font-mono">${orderNumber}</span></p>
                        <p><strong>Recipient:</strong> ${details.name}</p>
                        <p><strong>Address:</strong> ${details.address}</p>
                        <p class="text-sm italic text-pink-600 mt-3">You selected Cash On Delivery (COD).</p>
                    </div>
                    <button onclick="changePage('artists')" class="bg-pink-700 text-white px-6 py-3 rounded-full hover:bg-pink-800 transition-colors font-semibold mt-8">Continue Shopping</button>
                </div>
            `;
        };

        // NEW: Account Page Rendering (Lazada-like)
        const renderAccountPage = () => {
            return `
                <div class="max-w-4xl mx-auto animate-fade-in-up">
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-pink-200 mb-6">
                        <!-- Profile Header -->
                        <div class="profile-header p-6 flex items-center text-white">
                            <div class="relative">
                                <img src="https://i.imgur.com/6jR07Go.jpeg" class="w-20 h-20 rounded-full border-4 border-white object-cover shadow-md" alt="Profile">
                                <div class="absolute bottom-0 right-0 bg-green-400 w-5 h-5 rounded-full border-2 border-white"></div>
                            </div>
                            <div class="ml-6">
                                <h2 class="text-2xl font-bold">${state.user.name}</h2>
                                <p class="text-pink-100 text-sm flex items-center mt-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" /></svg>
                                    Member since ${state.user.memberSince}
                                </p>
                                <span class="inline-block mt-2 px-3 py-1 bg-yellow-400 text-yellow-900 text-xs font-bold rounded-full uppercase tracking-wider shadow-sm">
                                    ${state.user.tier}
                                </span>
                            </div>
                        </div>

                        <!-- My Orders Section -->
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold text-gray-800">My Orders</h3>
                                <button class="text-sm text-pink-600 hover:text-pink-800 font-medium">View All Orders ></button>
                            </div>
                            
                            <div class="grid grid-cols-4 gap-4 text-center">
                                <div class="group cursor-pointer">
                                    <div class="w-12 h-12 mx-auto mb-2 bg-pink-50 rounded-full flex items-center justify-center text-pink-600 group-hover:bg-pink-100 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>
                                    </div>
                                    <p class="text-xs font-medium text-gray-600">To Pay</p>
                                </div>
                                <div class="group cursor-pointer">
                                    <div class="w-12 h-12 mx-auto mb-2 bg-pink-50 rounded-full flex items-center justify-center text-pink-600 group-hover:bg-pink-100 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
                                    </div>
                                    <p class="text-xs font-medium text-gray-600">To Ship</p>
                                </div>
                                <div class="group cursor-pointer">
                                    <div class="w-12 h-12 mx-auto mb-2 bg-pink-50 rounded-full flex items-center justify-center text-pink-600 group-hover:bg-pink-100 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" /></svg>
                                    </div>
                                    <p class="text-xs font-medium text-gray-600">To Receive</p>
                                </div>
                                <div class="group cursor-pointer">
                                    <div class="w-12 h-12 mx-auto mb-2 bg-pink-50 rounded-full flex items-center justify-center text-pink-600 group-hover:bg-pink-100 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" /></svg>
                                    </div>
                                    <p class="text-xs font-medium text-gray-600">To Review</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Menu List -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-pink-200">
                        <div class="divide-y divide-pink-100">
                            <button class="w-full flex items-center justify-between p-4 hover:bg-pink-50 transition-colors text-left group">
                                <div class="flex items-center">
                                    <span class="text-pink-500 mr-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg></span>
                                    <span class="text-gray-700 font-medium group-hover:text-pink-700">Address Book</span>
                                </div>
                                <span class="text-gray-400 group-hover:text-pink-500">></span>
                            </button>
                            <button class="w-full flex items-center justify-between p-4 hover:bg-pink-50 transition-colors text-left group">
                                <div class="flex items-center">
                                    <span class="text-pink-500 mr-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg></span>
                                    <span class="text-gray-700 font-medium group-hover:text-pink-700">Payment Options</span>
                                </div>
                                <span class="text-gray-400 group-hover:text-pink-500">></span>
                            </button>
                            <button class="w-full flex items-center justify-between p-4 hover:bg-pink-50 transition-colors text-left group">
                                <div class="flex items-center">
                                    <span class="text-pink-500 mr-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z" /></svg></span>
                                    <span class="text-gray-700 font-medium group-hover:text-pink-700">Vouchers</span>
                                </div>
                                <span class="text-gray-400 group-hover:text-pink-500">></span>
                            </button>
                            <button class="w-full flex items-center justify-between p-4 hover:bg-pink-50 transition-colors text-left group">
                                <div class="flex items-center">
                                    <span class="text-pink-500 mr-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z" /></svg></span>
                                    <span class="text-gray-700 font-medium group-hover:text-pink-700">Help Center</span>
                                </div>
                                <span class="text-gray-400 group-hover:text-pink-500">></span>
                            </button>
                        </div>
                    </div>
                    
                    <button onclick="changePage('artists')" class="mt-6 w-full py-3 bg-gray-200 text-gray-700 font-bold rounded-lg hover:bg-gray-300 transition-colors">
                        LOGOUT
                    </button>
                </div>
            `;
        };

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderPage();
        });
    </script>
</body>
</html>
